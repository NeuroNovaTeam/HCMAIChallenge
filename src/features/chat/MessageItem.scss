// MessageItem component styles with SCSS improvements

// Variables
$message-padding: 1rem;
$message-padding-mobile: 0.75rem;
$message-gap: 1rem;
$message-gap-mobile: 0.75rem;
$border-radius: 12px;
$avatar-size: 40px;
$avatar-size-mobile: 32px;
$avatar-font-size: 1.2rem;
$avatar-font-size-mobile: 1rem;
$transition-duration: 0.2s;
$mobile-breakpoint: 768px;

// Spacing variables
$spacing-xs: 0.25rem;
$spacing-sm: 0.5rem;
$spacing-md: 0.75rem;
$spacing-lg: 1rem;

// Typing animation variables
$typing-dot-size: 8px;
$typing-gap: 4px;
$typing-animation-duration: 1.4s;
$typing-delay-1: -0.32s;
$typing-delay-2: -0.16s;

// Mixins
@mixin flex-center {
  display: flex;
  align-items: center;
  justify-content: center;
}

@mixin transition($properties...) {
  $transitions: ();
  @each $prop in $properties {
    $transitions: append($transitions, $prop $transition-duration ease, comma);
  }
  transition: $transitions;
}

@mixin typing-animation {
  @keyframes typing {
    0%, 80%, 100% {
      transform: scale(0.8);
      opacity: 0.5;
    }
    40% {
      transform: scale(1);
      opacity: 1;
    }
  }
}

@mixin mobile-message-item {
  @media (max-width: $mobile-breakpoint) {
    padding: $message-padding-mobile;
    gap: $message-gap-mobile;
    
    .message-avatar {
      width: $avatar-size-mobile;
      height: $avatar-size-mobile;
      font-size: $avatar-font-size-mobile;
    }
    
    .message-header {
      flex-direction: column;
      align-items: flex-start;
      gap: $spacing-xs;
    }
  }
}

// Message item container
.message-item {
  display: flex;
  gap: $message-gap;
  padding: $message-padding;
  border-radius: $border-radius;
  @include transition(background-color);
  
  &:hover {
    background-color: var(--message-hover-bg);
  }
  
  &.user {
    background-color: var(--user-message-bg);
  }
  
  &.assistant {
    background-color: var(--assistant-message-bg);
  }
  
  @include mobile-message-item;
}

// Message avatar
.message-avatar {
  flex-shrink: 0;
  width: $avatar-size;
  height: $avatar-size;
  border-radius: 50%;
  @include flex-center;
  font-size: $avatar-font-size;
  background-color: var(--avatar-bg);
}

// Message content
.message-content {
  flex: 1;
  min-width: 0;
}

// Message header
.message-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: $spacing-sm;
}

// Message role
.message-role {
  font-weight: 600;
  color: var(--text-primary);
  font-size: 0.9rem;
}

// Message time
.message-time {
  font-size: 0.8rem;
  color: var(--text-secondary);
}

// Message text
.message-text {
  color: var(--text-primary);
  line-height: 1.6;
  
  p {
    margin: 0 0 $spacing-sm 0;
    
    &:last-child {
      margin-bottom: 0;
    }
  }
}

// Generating indicator
.generating-indicator {
  display: flex;
  align-items: center;
  gap: $spacing-sm;
}

// Typing dots
.typing-dots {
  display: flex;
  gap: $typing-gap;
  
  span {
    width: $typing-dot-size;
    height: $typing-dot-size;
    border-radius: 50%;
    background-color: var(--text-secondary);
    animation: typing $typing-animation-duration infinite ease-in-out;
    
    &:nth-child(1) {
      animation-delay: $typing-delay-1;
    }
    
    &:nth-child(2) {
      animation-delay: $typing-delay-2;
    }
  }
}

// Include typing animation
@include typing-animation; 